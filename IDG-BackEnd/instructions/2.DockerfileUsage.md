# How to Create a Dockerfile

Follow these steps to create a Dockerfile for your project:

1. **Open your project folder** in your code editor (such as Visual Studio Code).

2. **Create a new file** named `Dockerfile` (no file extension) in the root of your project directory.

3. **Copy and paste the following content** into your new `Dockerfile`:

    ```dockerfile
    FROM php:8.2.0-apache

    # Enable Apache mod_rewrite
    RUN a2enmod rewrite

    # Install required Linux libraries
    RUN apt-get update -y && apt-get install -y \
        libicu-dev \
        libmariadb-dev \
        unzip zip \
        zlib1g-dev \
        libpng-dev \
        libjpeg-dev \
        libfreetype6-dev \
        libjpeg62-turbo-dev \
        libzip-dev

    # Install PHP extensions
    RUN docker-php-ext-install gettext intl pdo_mysql gd pcntl zip

    # Configure GD extension with FreeType and JPEG support
    RUN docker-php-ext-configure gd --enable-gd --with-freetype --with-jpeg \
        && docker-php-ext-install -j$(nproc) gd

    # Set Apache document root to /var/www/html/public
    ENV APACHE_DOCUMENT_ROOT=/var/www/html/public
    RUN sed -ri -e 's!/var/www/html!${APACHE_DOCUMENT_ROOT}!g' /etc/apache2/sites-available/*.conf
    RUN sed -ri -e 's!/var/www/!${APACHE_DOCUMENT_ROOT}!g' /etc/apache2/apache2.conf /etc/apache2/conf-available/*.conf

    # Copy Composer and NodeJS from their official images
    COPY --from=composer:2.2 /usr/bin/composer /usr/bin/composer
    COPY --from=node:23.10.0 /usr/local /usr/local

    # Copy project files
    COPY . /var/www/html

    # Set working directory
    WORKDIR /var/www/html
    ```

4. **Save the file.**

Your Dockerfile is now ready to use for building your Docker image!

# How to Use a Dockerfile: Build, Run, Start, Stop, Up, and Down

## 1. Build the Docker Image

Open a terminal in your project directory (where the Dockerfile is located) and run:

```sh
docker build -t my-app .
```
This creates a Docker image named `my-app`.

---

## 2. Run a Container from the Image

To start a new container from your image:

```sh
docker run -d --name my-app-container -p 8000:80 my-app
```
- `-d` runs the container in detached mode (in the background).
- `--name` gives your container a name.
- `-p 8000:80` maps port 8000 on your machine to port 80 in the container.

To expose multiple ports, use multiple `-p` options. For example, to expose ports 80, 443, and 8000:

```sh
docker run -d --name my-app-container -p 80:80 -p 443:443 -p 8000:8000 my-app
```

---

## 3. Start and Stop the Container

To **stop** the running container:

```sh
docker stop my-app-container
```

To **start** it again:

```sh
docker start my-app-container
```

To **remove** the container:

```sh
docker rm my-app-container
```

---

## 4. Using Docker Compose (Up and Down)

If you have a `docker-compose.yml` file, you can use:

- **Start (up):**
  ```sh
  docker-compose up -d
  ```
- **Stop (down):**
  ```sh
  docker-compose down
  ```

---

## 5. View Running Containers

```sh
docker ps
```

---

## 6. View All Containers (including stopped)

```sh
docker ps -a
```

---

Replace `my-app` and `my-app-container` with your preferred image and container names.


# How to Login, Build, and Push a Docker Image to Docker Hub

Follow these steps to authenticate with Docker Hub, build your Docker image, and push it to your Docker Hub repository.

---

## 1. Login to Docker Hub

Open your terminal and run:

```
docker login
```

- Enter your Docker Hub username and password when prompted.
- If you have 2FA enabled, use a personal access token as your password.

---

## 2. Build Your Docker Image

From your project directory (where your `Dockerfile` is located), run:


```
docker build -t <your-dockerhub-username>/<repository-name>:<tag> .
```

- Replace `<your-dockerhub-username>` with your Docker Hub username.
- Replace `<repository-name>` with your desired image name (create the repo on Docker Hub if it doesn't exist).
- Replace `<tag>` with a version tag, such as `latest`, `v1`, or any label you want to identify this build.


**About `<tag>`:**
The `<tag>` is used to identify different versions or variants of your Docker image. Common tags include `latest` (for the most recent build), version numbers like `v1`, `v2`, or descriptive names like `dev`, `prod`, etc. Using tags helps you manage and deploy specific versions of your application image.

**What if you don't specify a tag?**
If you omit the `:<tag>` part when building or pushing an image, Docker automatically uses the `latest` tag. For example, `docker build -t johndoe/my-laravel-app .` is equivalent to `docker build -t johndoe/my-laravel-app:latest .`. The `latest` tag is just a convention and does not mean the image is the newest; it's simply the default label Docker applies when no tag is provided.

**Example:**
```
docker build -t johndoe/my-laravel-app:latest .
```

---

## 3. Push the Image to Docker Hub

After building, push your image with:

```
docker push <your-dockerhub-username>/<repository-name>:<tag>
```

**Example:**
```
docker push johndoe/my-laravel-app:latest
```

---


## 4. Verify the Image on Docker Hub

- Go to https://hub.docker.com/repositories and log in.
- You should see your image listed in your repositories.

---

## 5. Pull the Image from Docker Hub

To download (pull) your image from Docker Hub to any machine with Docker installed, use:

```
docker pull <your-dockerhub-username>/<repository-name>:<tag>
```

**Example:**
```
docker pull johndoe/my-laravel-app:latest
```

This command fetches the specified image and tag from Docker Hub, making it available locally for running containers.

---

## Notes
- Make sure your image name matches your Docker Hub repository name.
- You must be logged in to Docker Hub before pushing.
- If you update your image, rebuild and push again with the same or a new tag.
