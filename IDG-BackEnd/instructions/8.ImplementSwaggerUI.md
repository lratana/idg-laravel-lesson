# Implementing Swagger UI for Laravel API Authentication

This guide explains how to document and visualize your API authentication endpoints (`signup`, `signin`, `signout`) using Swagger UI in a Laravel project.

---

## 1. Install Swagger Package

Install [L5-Swagger](https://github.com/DarkaOnLine/L5-Swagger), a popular Swagger/OpenAPI package for Laravel:

```
composer require "darkaonline/l5-swagger"
```

---

## 2. Publish Swagger Configuration

Publish the configuration and view files:

```
php artisan vendor:publish --provider="L5Swagger\L5SwaggerServiceProvider"
```

---

## 3. Configure L5-Swagger (Optional)

Edit `config/l5-swagger.php` to adjust settings such as API title, description, and routes if needed.

---

## 4. Add OpenAPI Annotations to AuthController

# Important: Add @OA\Info Annotation

Swagger/OpenAPI requires an `@OA\Info` annotation to generate documentation. Add the following block to the top of your `AuthController.php` (or any controller, or a dedicated PHP file that is scanned by L5-Swagger):

```php
/**
 * @OA\Info(title="API TICKETS", version="1.0")
 * 
 * 
 * @OAS\SecurityScheme(
 *      securityScheme="bearer_token",
 *      type="http",
 *      scheme="bearer"
 * )
 */
```

Place this above the class definition or in a dedicated file (e.g., `app/Http/Controllers/Controller.php`). This annotation is required for Swagger to work.

Annotate your `AuthController` methods with OpenAPI (Swagger) comments. Example for the three endpoints:

```php
/**
 * @OA\Post(
 *     path="/api/signup",
 *     summary="Register a new user",
 *     tags={"Auth"},
 *     @OA\RequestBody(
 *         required=true,
 *         @OA\JsonContent(
 *             required={"name","email","password","password_confirmation"},
 *             @OA\Property(property="name", type="string"),
 *             @OA\Property(property="email", type="string", format="email"),
 *             @OA\Property(property="password", type="string", format="password"),
 *             @OA\Property(property="password_confirmation", type="string", format="password")
 *         )
 *     ),
 *     @OA\Response(response=201, description="Signed up successfully"),
 *     @OA\Response(response=422, description="Validation error")
 * )
 */
public function signup(Request $request) { /* ... */ }

/**
 * @OA\Post(
 *     path="/api/signin",
 *     summary="Authenticate user",
 *     tags={"Auth"},
 *     @OA\RequestBody(
 *         required=true,
 *         @OA\JsonContent(
 *             required={"email","password"},
 *             @OA\Property(property="email", type="string", format="email"),
 *             @OA\Property(property="password", type="string", format="password")
 *         )
 *     ),
 *     @OA\Response(response=201, description="Signed in successfully"),
 *     @OA\Response(response=401, description="Invalid credentials")
 * )
 */
public function signin(Request $request) { /* ... */ }

/**
 * @OA\Post(
 *     path="/api/signout",
 *     summary="Logout user (revoke token)",
 *     tags={"Auth"},
 *     security={{"sanctum":{}}},
 *     @OA\Response(response=200, description="Signed out successfully"),
 *     @OA\Response(response=401, description="Unauthenticated")
 * )
 */
public function signout(Request $request) { /* ... */ }
```

- Place these annotations as PHPDoc comments above each method in your `AuthController`.
- Adjust property types and descriptions as needed for your API.

---

## 5. Generate Swagger Documentation

Run the following command to generate the Swagger docs:

```
php artisan l5-swagger:generate
```

---

## 6. Access Swagger UI

Visit the Swagger UI in your browser:

```
http://localhost:8000/api/documentation
```

This page will display interactive API documentation for your endpoints.

---

## 7. (Optional) Secure Swagger UI

If needed, restrict access to the Swagger UI in `config/l5-swagger.php` or via route middleware.

---

## 8. Enable Sanctum Security Scheme in Swagger

To allow Swagger UI to send the Authorization header for Sanctum-protected endpoints, add the following to your `config/l5-swagger.php` under `securityDefinitions > securitySchemes`:

```php
'sanctum' => [ // Unique name of security
	'type' => 'apiKey', // Valid values are "basic", "apiKey" or "oauth2".
	'description' => 'Enter token in format (Bearer <token>)',
	'name' => 'Authorization', // The name of the header or query parameter to be used.
	'in' => 'header', // The location of the API key. Valid values are "query" or "header".
],
```

This enables the "Authorize" button in Swagger UI, allowing you to enter your Sanctum token for authenticated requests.

---

## References
- [L5-Swagger Documentation](https://github.com/DarkaOnLine/L5-Swagger)
- [OpenAPI Specification](https://swagger.io/specification/)
